ansible_port: 22
ansible_user: andy
k3s_version: v1.32.1+k3s1
# The token should be a random string of reasonable length. You can generate
# one with the following commands:
# - openssl rand -base64 64
# - pwgen -s 64 1
# You can use ansible-vault to encrypt this value / keep it secret.
# Or you can omit it if not using Vagrant and let the first server automatically generate one.
token: "{{ k3s_token }}"
api_endpoint: "{{ hostvars[groups['server'][0]]['ansible_host'] | default(groups['server'][0]) }}"
apiserver_endpoint: "kube01.cooney.site"
k3s_master_taint: "{{ true if groups['agent'] | default([]) | length >= 1 else false }}"

extra_server_args: >-
  {{ '--node-taint node-role.kubernetes.io/master=true:NoSchedule' if k3s_master_taint else '' }}
  --tls-san "{{ apiserver_endpoint }}"
